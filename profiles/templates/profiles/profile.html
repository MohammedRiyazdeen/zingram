{% extends 'base.html' %}

{% block content %}
<div class="container mt-4 text-light">

  <!-- Profile Section -->
  <div class="d-flex align-items-center mb-4">
    <img src="{{ profile.profile_pic.url }}" width="100" height="100" class="rounded-circle me-3">
    <div>
      <h3>@{{ profile_user.username }}</h3>

      {% if request.user != profile_user %}
        <form method="POST" action="{% url 'follow-unfollow' profile_user.username %}">
          {% csrf_token %}
          {% if is_following %}
            <button class="btn btn-danger btn-sm">Unfollow</button>
          {% else %}
            <button class="btn btn-primary btn-sm">Follow</button>
          {% endif %}
        </form>
      {% endif %}

      <p class="text-muted">{{ profile.bio }}</p>
      <p>
        <strong>{{ followers_count }}</strong> Followers â€¢ 
        <strong>{{ following_count }}</strong> Following
      </p>
    </div>
  </div>

  <hr>

  <!-- Posts Section -->
  <h4 class="mt-4 mb-3">Posts</h4>

  <div class="row">
    {% for post in posts %}
      <div class="col-md-4 mb-4">
        <div class="card bg-dark text-light border-secondary">
          <img src="{{ post.image.url }}" class="card-img-top" style="height: 300px; object-fit: cover;">
          <div class="card-body">
            <p class="card-text">{{ post.caption }}</p>
            <p class="text-muted"><small>{{ post.created_at }}</small></p>
          </div>
        </div>
      </div>
    {% empty %}
      <p class="text-muted">No posts yet.</p>
    {% endfor %}
  </div>

</div>
{% endblock %}
